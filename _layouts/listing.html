---
layout: default
---
<section class="page-hero">
  <div class="page-hero__inner">
    <p class="eyebrow">Montreal Academy Club</p>
    <h1>{{ page.title }}</h1>
    {% if page.subtitle %}<p class="lead">{{ page.subtitle }}</p>{% endif %}
  </div>
</section>

<section class="section">
  <div class="listing-meta">
    {% if page.lead %}<p class="lead">{{ page.lead }}</p>{% endif %}
  </div>

  {% if page.show_categories %}
    {% assign categories = site.pages | where_exp: "p", "p.url contains '/news/categories/'" | sort: "title" %}
    {% if categories.size > 0 %}
      <div class="category-pills">
        {% for cat in categories %}
          <a class="pill" href="{{ cat.url | relative_url }}">{{ cat.title | default: cat.url | split: '/' | last }}</a>
        {% endfor %}
      </div>
    {% endif %}
  {% endif %}

  {% assign items = site.pages | where_exp: "p", "p.url contains page.filter_prefix" | where_exp: "p", "p.url != page.url" | sort: "date" | reverse %}
  {% if items.size > 0 %}
    {% if page.filter_prefix == '/single-post/' %}
      <h2 class="home-featured-title">Featured Articles</h2>
      <div class="home-blog-grid">
        {% for item in items %}
          {% assign first_img = '' %}
          {% assign img_chunks = item.content | split: '![' %}
          {% if img_chunks.size > 1 %}
            {% assign img_bits = img_chunks[1] | split: '](' %}
            {% if img_bits.size > 1 %}
              {% assign first_img = img_bits[1] | split: ')' | first | strip %}
            {% endif %}
          {% endif %}
          {% assign fallback_img = site.data.single_post_images[item.url] | default: '' %}
          {% if fallback_img == '' %}
            {% assign tail = item.url | slice: -1, 1 %}
            {% if tail == '/' %}
              {% assign url_len = item.url | size %}
              {% assign url_len_minus = url_len | minus: 1 %}
              {% assign alt_key = item.url | slice: 0, url_len_minus %}
            {% else %}
              {% assign alt_key = item.url | append: '/' %}
            {% endif %}
            {% assign fallback_img = site.data.single_post_images[alt_key] | default: '' %}
          {% endif %}
          {% assign card_img = first_img %}
          {% if card_img == '' and fallback_img != '' %}
            {% assign card_img = fallback_img %}
          {% endif %}
          <a class="home-blog-card{% if card_img == '' %} home-blog-card--no-image{% endif %}" href="{{ item.url | relative_url }}">
            {% if card_img != '' %}
              {% if card_img contains '://' %}
                <img src="{{ card_img }}" alt="{{ item.title }}" loading="lazy" />
              {% else %}
                <img src="{{ card_img | relative_url }}" alt="{{ item.title }}" loading="lazy" />
              {% endif %}
            {% else %}
              <div class="home-blog-card__placeholder" aria-hidden="true"></div>
            {% endif %}
            <h3>{{ item.title }}</h3>
          </a>
        {% endfor %}
      </div>
    {% else %}
      <div class="cards">
        {% for item in items %}
          <a class="post-card" href="{{ item.url | relative_url }}">
            <div class="post-card__body">
              <p class="post-card__date">{% if item.date %}{{ item.date | date: "%Y-%m-%d" }}{% endif %}</p>
              <h3>{{ item.title }}</h3>
              {% if item.subtitle %}
                {% if item.subtitle contains '。' %}
                  {% assign _sentences = item.subtitle | split: '。' %}
                  {% assign _excerpt = _sentences | slice: 0, 3 | join: '。' %}
                  <p class="post-card__excerpt">{{ _excerpt }}{% if _excerpt != '' %}。{% endif %}</p>
                {% elsif item.subtitle contains '.' %}
                  {% assign _sentences = item.subtitle | split: '.' %}
                  {% assign _excerpt = _sentences | slice: 0, 3 | join: '.' %}
                  <p class="post-card__excerpt">{{ _excerpt }}{% if _excerpt != '' %}.{% endif %}</p>
                {% else %}
                  <p class="post-card__excerpt">{{ item.subtitle }}</p>
                {% endif %}
              {% endif %}
            </div>
          </a>
        {% endfor %}
      </div>
    {% endif %}
  {% else %}
    <p>記事は準備中です。</p>
  {% endif %}
</section>
